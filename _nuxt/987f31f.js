(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{196:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=n(0).a.extend({props:{title:{type:String,default:""}}})},212:function(t,e,n){"use strict";n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return O}));var r,o,c=n(53),l=(n(51),n(52),n(26),n(22),n(14),n(44),n(107),n(0)),d=n(329),f=n.n(d),m=n(102),h=l.a.extend({name:"BlocksPaletteSearch",data:function(){return{search:""}},methods:{focus:function(){this.$refs.input.focus()},clear:function(){this.search="",this.$emit("change","")}},render:function(){var t,e=this,n=arguments[0];return""!==this.search&&(t=n("q-icon",{attrs:{name:"close"},class:"cursor-pointer",on:{click:function(){e.clear(),e.focus()}}})),n("q-input",{ref:"input",attrs:{label:"Search",filled:!0,dark:!0,value:this.search},scopedSlots:{append:function(){return[t,n("q-icon",{attrs:{name:"search"}})]}},on:{input:function(t){e.search=t,e.$emit("change",t.trim())}}})}}),v=l.a.extend({name:"BlocksPaletteItem",functional:!0,props:{title:{type:String,default:""},description:{type:String,default:""},icon:{type:String,default:"extension"},name:{type:String,required:!0}},render:function(t,e){var n,r=e.props,o=e.listeners,c=arguments[0];""!==r.description&&(n=c("q-item-label",{attrs:{caption:!0}},[r.description]));var title=c("q-item-label",[r.title]);return c("q-item",{style:"user-select: none;",attrs:{clickable:!0},on:{click:o.click}},[c("q-item-section",{attrs:{avatar:!0}},[c("q-avatar",{attrs:{icon:r.icon,color:"grey-7","text-color":"white"}})]),c("q-item-section",[title,n])])}}),y=l.a.observable({isOpen:!1}),k={setOpen:function(t){y.isOpen=t}},O={state:y,mutations:k},w=(n(340),l.a.extend({name:"BlocksPalette",components:{BlocksPaletteSearch:h,BlocksPaletteItem:v},data:function(){return{search:"",toggleButton:null,hovered:!1}},computed:{blocks:function(){if(""===this.search)return this.$blocks.groupedMeta;for(var t={},e=this.search.toLowerCase(),n=0,r=Object.keys(this.$blocks.groupedMeta);n<r.length;n++){var o=r[n],c=this.$blocks.groupedMeta[o].filter((function(t){var n=((null==t?void 0:t.name)||"").toLowerCase(),r=((null==t?void 0:t.description)||"").toLowerCase();return n.includes(e)||r.includes(e)}));c.length>0&&(t[o]=c)}return t}},mounted:function(){this.toggleButton=document.querySelector(".toggle-button"),this.$el.addEventListener("mouseenter",this.__mouseover),this.$el.addEventListener("mouseleave",this.__mouseout),m.eventBus.on("blocks:add-block",this.__initWatcher)},beforeDestroy:function(){this.$el.removeEventListener("mouseenter",this.__mouseover),this.$el.removeEventListener("mouseleave",this.__mouseout),m.eventBus.off("blocks:add-block",this.__initWatcher)},methods:{show:function(){this.$el.setAttribute("style","left: 300px;"),null!==this.toggleButton&&(this.toggleButton.style.display="none"),O.mutations.setOpen(!0),this.$refs.searchInput.focus()},hide:function(){this.$refs.searchInput.clear(),this.$el.setAttribute("style","left: -300px;"),null!==this.toggleButton&&(this.toggleButton.style.display="initial"),O.mutations.setOpen(!1),"function"==typeof o&&(o(),o=void 0)},__initWatcher:function(){var t=this;"function"!=typeof o&&(o=this.$watch((function(){return t.hovered}),this.__hoverWatcher,{immediate:!0}))},__hoverWatcher:function(){this.hovered?clearTimeout(r):r=setTimeout(this.hide,2e3)},__mouseover:function(){this.hovered=!0},__mouseout:function(){this.hovered=!1}},render:function(){for(var t=this,e=arguments[0],n=[],r=0,o=Object.keys(this.blocks);r<o.length;r++){var l=o[r];n.push(e("q-item-label",{attrs:{header:!0}},[f()(l)])),n.push.apply(n,Object(c.a)(this.blocks[l].map((function(n){return e("blocks-palette-item",{attrs:{name:n.name,title:n.title,description:n.description,icon:n.icon},on:{click:function(){return t.$emit("add-block",{block:n})}}})}))))}return e("div",{class:"blocks-palette bg-grey-9 shadow-5"},[e("q-toolbar",{class:"bg-grey-7"},[e("q-toolbar-title",["Select block"])]),e("blocks-palette-search",{ref:"searchInput",on:{change:function(e){t.search=e}}}),e("q-list",[n])])}}))},214:function(t,e,n){"use strict";n.d(e,"a",(function(){return r.a})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return v.a}));var r=n(233),o=(n(212),n(50),n(44),n(35),n(25),n(36),n(26),n(28),n(29),n(18)),c=n(53);n(22),n(14),n(27),n(211);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function f(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var h=n(0).a.extend({name:"TheBlocks",functional:!0,props:{blocks:{type:Array,required:!0},tag:{type:String,default:"div"}},render:function(t,e){var n,r=e.props,o=new Set,l=f(r.blocks);try{for(l.s();!(n=l.n()).done;){var m=n.value,component=t(m.component,{props:d({},m.props),key:m.id});o.add(component)}}catch(t){l.e(t)}finally{l.f()}return t(r.tag,Object(c.a)(o))}}),v=n(196)},233:function(t,e,n){"use strict";(function(t){n(35),n(25),n(27),n(36),n(28),n(29),n(22),n(14),n(44),n(26),n(16);var r=n(2),o=(n(255),n(0)),c=n(257),l=n.n(c),d=n(234),f=n.n(d),m=n(200),h=n(102),v=n(212),y=n(348),k=n(342),O=n(252),w=n(253);n(343);function j(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}e.a=o.a.extend({name:"BlocksEditor",props:{blocks:{type:Array,required:!0}},components:{Draggable:l.a,BlocksPalette:v.a,BlocksEditorItem:y.a,BlocksEditorToolbar:k.a},data:function(){return{isPaletteOpen:!1,unwatch:void 0,items:[],drag:!1}},created:function(){var t=this;w.a.clear(),O.a.mutate("load",this.blocks,this.$blocks.meta),this.items=f()(O.a.state.items),this.unwatch=this.$watch((function(){return O.a.state.items}),(function(e){var n=f()(e);t.items=n,t.$emit("change",n),h.eventBus.emit("core:save-disable",!1)}),{deep:!0}),h.eventBus.emit("core:save-disable",!0)},beforeDestroy:function(){var e,n;!1!==(null===(e=t)||void 0===e||null===(n=e.hot)||void 0===n?void 0:n.active)&&"function"==typeof this.unwatch&&this.unwatch()},methods:{addBlock:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,c,l,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==t.name){n.next=2;break}throw new TypeError("Component name not provided");case 2:for(r={},o=0,c=Object.keys(t.props);o<c.length;o++)l=c[o],r[l]=t.props[l].default;return d={id:Object(m.a)(),component:t.name,props:r},O.a.mutate("add",d),n.next=8,e.$nextTick();case 8:h.eventBus.emit("blocks:add-block",d);case 9:case"end":return n.stop()}}),n)})))()},cloneBlock:function(t){O.a.mutate("clone",t)},changeBlockProp:function(t,e,n){O.a.mutate("changeProp",t,e,n)},removeBlock:function(t){var e=t.id;O.a.mutate("remove",e)},reorder:function(t){this.items=t;var e,n=[],r=j(this.items);try{for(r.s();!(e=r.n()).done;){var o=e.value;n.push(o.id)}}catch(t){r.e(t)}finally{r.f()}O.a.mutate("reorder",n)},expandAll:function(){this.$root.$emit("blocks:expand-all")},collapseAll:function(){this.$root.$emit("blocks:collapse-all")}},render:function(){var t,e=this,n=arguments[0],r=[],o=j(this.items);try{var c=function(){var o=t.value;if(!e.$blocks.existsBlock(o.component))return console.warn("Block with name ".concat(o.component," not exists in project")),"continue";r.push(n("blocks-editor-item",{key:o.id,attrs:{id:o.id,component:o.component,form:o.props||{}},on:{change:function(t){var n=t.propName,r=t.value;return e.changeBlockProp(o.id,n,r)},clone:function(t){var n=t.id;return e.cloneBlock(n)},remove:e.removeBlock}}))};for(o.s();!(t=o.n()).done;)c()}catch(t){o.e(t)}finally{o.f()}return n("div",{class:"fit relative-position"},[n("blocks-editor-toolbar",{attrs:{"can-undo":w.a.canUndo(),"can-redo":w.a.canRedo(),"blocks-count":this.blocks.length},on:{undo:w.a.undo,redo:w.a.redo,"expand-all":this.expandAll,"collapse-all":this.collapseAll,"show-palette":function(){return e.$refs.palette.show()},"hide-palette":function(){return e.$refs.palette.hide()}}}),n("blocks-palette",{ref:"palette",on:{"add-block":function(t){var n=t.block;return e.addBlock(n)}}}),n("q-list",{attrs:{dark:!0},style:"padding-bottom:120px"},[n("draggable",{attrs:{value:this.items,animation:200,group:"description",disabled:!1,handle:".q-item"},on:{start:function(){return e.drag=!0},end:function(){return e.drag=!1},input:this.reorder}},[n("transition-group",{attrs:{type:"transition",name:this.drag?void 0:"flip-list"}},[].concat(r))])])])}})}).call(this,n(256)(t))},252:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));n(35),n(25),n(27),n(36),n(28),n(29);var r=n(18),o=(n(225),n(51),n(52),n(103),n(22),n(14),n(44),n(15)),c=(n(26),n(226),n(0)),l=n(234),d=n.n(l),f=n(200),m=n(253);function h(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var y=c.a.observable({items:[]}),k={load:function(t,meta){var e,n=d()(t),r=h(n);try{var c=function(){var t=e.value,n=meta.find((function(e){return e.name===t.component}));if(void 0===n)throw new Error("Meta info for block ".concat(t.component," not found."));if("object"!==Object(o.a)(t.props)){t.props={};for(var r=0,c=Object.keys(n.props);r<c.length;r++){var l=c[r];"date"!==n.props[l].type?t.props[l]=n.props[l].default:t.props[l]=new Date(Number(n.props[l].default))}}else for(var d=0,f=Object.keys(n.props);d<f.length;d++){var m=f[d];if(!Object.keys(t.props).includes(m)){if("date"===n.props[m].type){t.props[m]=new Date(Number(n.props[m].default));continue}t.props[m]=n.props[m].default}}};for(r.s();!(e=r.n()).done;)c()}catch(t){r.e(t)}finally{r.f()}y.items=n},clear:function(){y.items=[]},add:function(t){y.items.push(t)},changeProp:function(t,e,n){var c=y.items.findIndex((function(e){return e.id===t}));if(-1===c)throw new Error("Block with id ".concat(t," not found"));"object"!==Object(o.a)(y.items[c].props)?y.items[c].props=Object(r.a)({},e,n):y.items[c].props[e]=n},clone:function(t){var e=y.items.find((function(e){return e.id===t}));if(void 0===e)throw new Error("Block with id ".concat(t," not found."));y.items.push({id:Object(f.a)(),component:e.component,props:d()(e.props)})},remove:function(t){var e=y.items.findIndex((function(e){return e.id===t}));e>-1&&y.items.splice(e,1)},reorder:function(t){y.items.sort((function(a,b){var e=t.findIndex((function(t){return t===a.id})),n=t.findIndex((function(t){return t===b.id}));return e<n?-1:n<e?1:0}))}};var O={state:y,mutations:k,mutate:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];k[t].apply(k,n),"clear"!==t&&m.a.add(t,n)}}},253:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));n(50),n(44),n(22),n(35),n(25),n(27),n(36),n(26),n(28),n(29),n(14);var r=n(18),o=n(53),c=n(0),l=n(252);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function m(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var v=c.a.observable({done:[],undone:[]}),y={canRedo:function(){return v.undone.length>0},canUndo:function(){return v.done.length>1}},k={add:function(t,e){v.done.push({type:t,payload:e})},clear:function(){v.done=[],v.undone=[]},undo:function(){var t=v.done.pop();if(void 0!==t){v.undone.push(t),l.a.mutations.clear();var e,n=m(v.done);try{for(n.s();!(e=n.n()).done;){var r,c=e.value;(r=l.a.mutations)[c.type].apply(r,Object(o.a)(c.payload))}}catch(t){n.e(t)}finally{n.f()}}},redo:function(){var t,e=v.undone.pop();void 0!==e&&(t=l.a.mutations)[e.type].apply(t,Object(o.a)(e.payload))}},O=f(f(f({},v),k),y)},255:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));n(22),n(14),n(44);for(var r=n(0),o=n(195),c=n(196),l=Object(o.a)(c.a).extend({name:"TextPropEditor",props:{value:{type:String,required:!0}},render:function(){var t=this,e=arguments[0];return e("q-input",{attrs:{outlined:!0,dark:!0,value:this.value,label:this.title},on:{input:function(e){return t.$emit("change",e)}}})}}),d=Object(o.a)(c.a).extend({name:"CheckboxPropEditor",props:{value:{type:[Boolean,String],required:!0}},render:function(){var t=this,e=arguments[0];return e("q-checkbox",{attrs:{value:this.value,label:this.title,dark:!0},on:{input:function(e){return t.$emit("change",e)}}})}}),f=(n(103),Object(o.a)(c.a).extend({name:"NumberPropEditor",props:{value:{type:[Number,String],required:!0}},render:function(){var t=this,e=arguments[0];return e("q-input",{attrs:{outlined:!0,dark:!0,type:"number",value:Number(this.value),label:this.title},on:{input:function(e){return t.$emit("change",Number(e))}}})}})),m=Object(o.a)(c.a).extend({name:"TextareaPropEditor",props:{value:{type:String,required:!0}},render:function(){var t=this,e=arguments[0];return e("q-input",{attrs:{outlined:!0,dark:!0,type:"textarea",value:this.value,label:this.title},on:{input:function(e){return t.$emit("change",e)}}})}}),h=Object(o.a)(c.a).extend({name:"DatePropEditor",props:{value:{type:Date,required:!0}},render:function(){var t=this,e=arguments[0];return e("div",{class:"text-white"},[this.title,e("q-date",{attrs:{value:this.value,minimal:!0,dark:!0},on:{input:function(e){return t.$emit("change",e)}}})])}}),v=[["left","center","right","justify"],["bold","italic","strike","underline"],["fullscreen"]],y={"text-prop-editor":l,"checkbox-prop-editor":d,"number-prop-editor":f,"textarea-prop-editor":m,"date-prop-editor":h,"wysiwyg-prop-editor":Object(o.a)(c.a).extend({name:"WysiwygPropEditor",props:{value:{type:String,required:!0},toolbar:{type:Array,default:function(){return v}}},render:function(){var t=this,e=arguments[0];return e("q-editor",{attrs:{outlined:!0,dark:!0,value:this.value,label:this.title,toolbar:this.toolbar},on:{input:function(e){return t.$emit("change",e)}}})}})},k=0,O=Object.keys(y);k<O.length;k++){var w=O[k];r.a.component(w,y[w])}},340:function(t,e,n){},341:function(t,e,n){var map={"./color":[198,4],"./color.vue":[198,4]};function r(t){if(!n.o(map,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=map[t],r=e[0];return n.e(e[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(map)},r.id=341,t.exports=r},342:function(t,e,n){"use strict";n(103);var r=n(0),o=n(212);e.a=r.a.extend({name:"BlocksEditorToolbar",props:{canUndo:{type:Boolean,default:!1},canRedo:{type:Boolean,default:!1},blocksCount:{type:Number,default:0}},methods:{undo:function(){this.$emit("undo")},redo:function(){this.$emit("redo")},expandAll:function(){this.$emit("expand-all")},collapseAll:function(){this.$emit("collapse-all")},togglePalette:function(){var t=!o.b.state.isOpen?"show-palette":"hide-palette";this.$emit(t)}},render:function(){var t=arguments[0];return t("q-toolbar",[t("q-btn",{attrs:{icon:"undo",round:!0,dense:!0,flat:!0,disable:!this.canUndo},on:{click:this.undo}},[t("q-tooltip",["Undo"])]),t("q-btn",{attrs:{icon:"redo",round:!0,dense:!0,flat:!0,disable:!this.canRedo},on:{click:this.redo}},[t("q-tooltip",["Redo"])]),t("q-separator",{attrs:{dark:!0,inset:!0,spaced:!0,vertical:!0}}),t("q-btn",{attrs:{icon:"unfold_more",round:!0,dense:!0,flat:!0,disable:0===this.blocksCount},on:{click:this.expandAll}},[t("q-tooltip",["Expand all"])]),t("q-btn",{attrs:{icon:"unfold_less",round:!0,dense:!0,flat:!0,disable:0===this.blocksCount},on:{click:this.collapseAll}},[t("q-tooltip",["Collapse all"])]),t("q-separator",{attrs:{color:"grey-9"}}),t("q-btn",{attrs:{icon:o.b.state.isOpen?"close":"add",color:o.b.state.isOpen?"negative":"primary",round:!0,dense:!0,size:"md",className:"q-ml-sm"},on:{click:this.togglePalette}})])}})},343:function(t,e,n){},348:function(t,e,n){"use strict";var r=n(53),o=n(0),c=n(102),l=(n(50),n(35),n(25),n(27),n(36),n(26),n(28),n(29),n(18)),d=(n(51),n(52),n(22),n(14),n(44),n(15)),f=n(255);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function v(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var k=o.a.extend({name:"BlocksEditorItemForm",props:{component:{type:String,required:!0},form:{type:Object,default:function(){},validator:function(t){return"object"===Object(d.a)(t)}}},data:function(){return{customPropEditors:{}}},computed:{meta:function(){var t=this.$blocks.getBlock(this.component);if(void 0===t)throw new Error("Block meta not found for component ".concat(this.component));return t}},created:function(){var t,e=this,r=v(Object.keys(this.meta.props).map((function(t){var n;return null!==(n=e.meta.props[t].editor)&&void 0!==n?n:""})).filter((function(t){var e="".concat(t,"-prop-editor");return!Object.keys(f.a).includes(e)})));try{var o=function(){var r=t.value;e.customPropEditors[r]=function(){return t=r,{component:n(341)("./".concat(t)),timeout:600};var t}};for(r.s();!(t=r.n()).done;)o()}catch(t){r.e(t)}finally{r.f()}},methods:{changeForm:function(t,e){this.$emit("change",{propName:t,value:e})}},render:function(t){var e=this;if(0===Object.keys(this.meta.props).length)return t("q-card",{class:"bg-grey-9 q-pa-md text-grey",attrs:{flat:!0}},["No field"]);for(var n=[],r=function(){var r,l,d,m,v=c[o];if(void 0===(null===(r=e.meta.props)||void 0===r?void 0:r[v].editor))return"continue";var y,k=(null===(l=e.meta.props)||void 0===l||null===(d=l[v])||void 0===d?void 0:d.editor)||"text",O="".concat(k,"-prop-editor");Object.keys(f.a).includes(O)||(O=(null===(y=e.customPropEditors)||void 0===y?void 0:y[k])||void 0);n.push(t(O,{props:h({value:null===(m=e.form)||void 0===m?void 0:m[v],title:e.meta.props[v].title},e.meta.props[v].options),on:{change:function(t){return e.changeForm(v,t)}}}))},o=0,c=Object.keys(this.meta.props);o<c.length;o++)r();return t("q-card",{class:"bg-grey-9 q-pa-md",attrs:{flat:!0}},[t("div",{class:"q-gutter-md"},[].concat(n))])}});e.a=o.a.extend({name:"BlocksEditorItem",props:{id:{type:String,required:!0},component:{type:String,required:!0},form:{type:Object,default:function(){}}},components:{BlocksEditorItemForm:k},data:function(){return{showRemoveConfirm:!1,isFormLoad:!1}},computed:{meta:function(){var t=this.$blocks.getBlock(this.component);if(void 0===t)throw new Error("Block meta for component ".concat(this.component," not found."));return t}},created:function(){this.$root.$on("blocks:expand-all",this.expandItem),this.$root.$on("blocks:collapse-all",this.collapseItem)},beforeDestroy:function(){this.$root.$off("blocks:expand-all",this.expandItem),this.$root.$off("blocks:collapse-all",this.collapseItem)},mounted:function(){var t=this;c.eventBus.on("blocks:add-block",(function(e){e[0].id===t.id&&t.$refs.blockItem.show()}))},methods:{removeCancelClick:function(t){t.stopPropagation(),this.showRemoveConfirm=!1},removeOkClick:function(t){t.stopPropagation(),this.$emit("remove",{id:this.id})},removeClick:function(){this.showRemoveConfirm=!0},clone:function(){this.$emit("clone",{id:this.id})},change:function(t){var e=t.propName,n=t.value;this.$emit("change",{propName:e,value:n})},expandItem:function(){void 0!==this.$refs.blockItem&&this.$refs.blockItem.show()},collapseItem:function(){void 0!==this.$refs.blockItem&&this.$refs.blockItem.hide()}},render:function(){var t,e,form,n=this,o=arguments[0],c=o("div",{class:["fit","row","q-gutter-x-sm","justify-center"]},[o("q-btn",{attrs:{label:"Cancel",dense:!1,outline:!0},on:{click:this.removeCancelClick}}),o("q-btn",{attrs:{label:"Remove",dense:!1,color:"negative"},on:{click:this.removeOkClick}})]),l=o("q-item-section",{attrs:{avatar:!0}},[o("q-avatar",{attrs:{icon:(null===(t=this.meta)||void 0===t?void 0:t.icon)||"extension",textColor:"white"}})]),d=o("q-item-section",[o("q-item-label",[(null===(e=this.meta)||void 0===e?void 0:e.title)||this.component]),this.meta.description?o("q-item-label",{attrs:{caption:!0,lines:2}},[this.meta.description]):void 0]),f=o("q-item-section",{attrs:{side:!0}},[o("q-btn",{attrs:{round:!0,flat:!0,dense:!0,icon:"more_vert"},on:{click:function(t){return t.stopPropagation()}}},[o("q-menu",{attrs:{"auto-close":!0}},[o("q-list",{attrs:{bordered:!1}},[o("q-item",{attrs:{clickable:!0},on:{click:this.clone}},[o("q-item-section",["Clone"])]),o("q-item",{attrs:{clickable:!0},on:{click:this.removeClick}},[o("q-item-section",[o("q-item-label",{attrs:{lines:1}},["Remove Block"])])])])])])]);return this.isFormLoad&&(form=o("blocks-editor-item-form",{attrs:{component:this.component,form:this.form},on:{change:this.change}})),o("q-expansion-item",{ref:"blockItem",attrs:{icon:this.meta.icon,denseToggle:!1,defaultOpened:!1},class:["admin-block-item","bg-grey-8","text-white"],scopedSlots:{header:function(){return Object(r.a)(n.showRemoveConfirm?[c]:[l,d,f])}},on:{"before-show":function(){return n.isFormLoad=!0}}},[form])}})}}]);